<h1>Shopping Cart</h1>
<div class="cart">
  <ng-template #loading class="loading"></ng-template>
  <div class="table-cart" *ngIf="cart$ | async as cart; else loading">
    <table class="table">
      <thead>
        <tr>
          <th></th>
          <th style="width: 330px">Product</th>
          <th style="width: 330px">Quantity</th>
          <th style="width: 300px">Price</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cart.items">
          <td>
            <div
              [style.backgroundImage]="'url(' + item.imageUrl + ')'"
              class="thumbnail"
            ></div>
          </td>
          <td>
            {{ item.title }}
          </td>
          <td>
            <app-product-quantity [product]="item" [shopping-cart]="cart">
            </app-product-quantity>
          </td>
          <td>
            {{ item.totalPrice | currency: "USD":"symbol" }}
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <th></th>
          <th></th>
          <th></th>
          <th>
            {{ cart.totalPrice | currency: "USD":"symbol" }}
          </th>
        </tr>
      </tfoot>
    </table>
    <div>
      <p class="cart-count">
        You have {{ cart.totalItemsCount }} items in your shopping cart.
      </p>
      <button (click)="clearCart()" class="btn clear-btn">
        Clear Shopping Cart
      </button>
    </div>
  </div>
  <div class="cart-summary" *ngIf="cart$ | async as cart; else loading">
    <h4>order summary</h4>
    <hr />
    <ul>
      <li>Items</li>
      <li>{{ cart.totalItemsCount }}</li>
    </ul>
    <p>shipping</p>
    <select class="form-control">
      <option>standard delivery - 4 DZD</option>
    </select>
    <hr />
    <ul>
      <li>total cost</li>
      <li>{{ cart.totalPrice | currency: "USD":"symbol" }}</li>
    </ul>
    <a class="btn btn-gray anim-ripple" [routerLink]="['/shopping/check-out']"
      >Check out</a
    >
  </div>
</div>
